<% content_for :title, "Rooms" %>

<div style="width: 100%;">
  <% if notice.present? %>
    <p
      id="notice"
      style="
        display: inline-block;
        padding: 0.6rem 1rem;
        margin-bottom: 1.25rem;
        background: #e6f9ef;
        color: #146c43;
        font-weight: 600;
        border-radius: 999px;
        box-shadow: 0 4px 10px rgba(20, 108, 67, 0.15);
      "
    >
      ✅ <%= notice %>
    </p>
  <% end %>

  <!-- Header / Controls -->
  <div
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 1rem;
    "
  >
    <h1
      style="
        font-size: 2.25rem;
        font-weight: 700;
        color: #0f2a44;
        margin: 0;
      "
    >
      ✈️ Flight Channels
    </h1>

    <%= link_to "New room", new_room_path,
      style: "
        display: inline-block;
        padding: 0.65rem 1.25rem;
        border-radius: 999px;
        background: linear-gradient(to right, #1e6fb9, #1e90ff);
        color: white;
        font-weight: 600;
        text-decoration: none;
        box-shadow: 0 6px 16px rgba(30, 111, 185, 0.35);
      "
    %>
  </div>

  <!-- Rooms radar feed -->
  <div
    id="rooms"
    style="
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    "
  >
    <% if @rooms.any? %>
      <%= turbo_stream_from "rooms_list" %>

      <% @rooms.each do |room| %>
        <div
          style="
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px dashed #c6ddf2;
          "
        >
          <!-- Room card -->
          <%= render room %>

          <!-- Controls -->
          <div
            style="
              display: flex;
              flex-wrap: wrap;
              gap: 0.5rem;
            "
          >
            <%= link_to "Show", room,
              style: "
                display: inline-block;
                text-align: center;
                padding: 0.55rem 1.1rem;
                border-radius: 999px;
                background: linear-gradient(to bottom, #f7fbff, #e8f2fb);
                color: #0f2a44;
                font-weight: 600;
                text-decoration: none;
                border: 1px solid #c6ddf2;
                box-shadow: 0 4px 10px rgba(15, 42, 68, 0.15);
              "
            %>

            <%= link_to "Edit", edit_room_path(room),
              style: "
                display: inline-block;
                text-align: center;
                padding: 0.55rem 1.1rem;
                border-radius: 999px;
                background: linear-gradient(to bottom, #f7fbff, #e8f2fb);
                color: #0f2a44;
                font-weight: 600;
                text-decoration: none;
                border: 1px solid #c6ddf2;
                box-shadow: 0 4px 10px rgba(15, 42, 68, 0.15);
              "
            %>

            <%= button_to "Destroy", room,
              method: :delete,
              data: { turbo_confirm: "Are you sure?" },
              style: "
                padding: 0.55rem 1.1rem;
                border-radius: 999px;
                background: linear-gradient(to right, #e5533d, #ff6b5c);
                color: white;
                font-weight: 600;
                border: none;
                cursor: pointer;
                box-shadow: 0 6px 16px rgba(229, 83, 61, 0.35);
              "
            %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p
        style="
          text-align: center;
          margin: 3rem 0;
          color: #5f7f9b;
          font-size: 1rem;
        "
      >
        ✈️ No channels found.
      </p>
    <% end %>
  </div>
</div>
